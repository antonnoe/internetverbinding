<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Internetverbinding ‚Äì Dataverbinding Frankrijk</title>
<style>
    /* --- BASIS STIJL --- */
    /* AANGEPAST: Padding-bottom verlaagd van 100px naar 20px om grijs vlak te verwijderen */
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background-color: #f4f4f9; color: #333; max-width: 800px; margin: 0 auto; }
    h1 { color: #800000; margin-bottom: 5px; }
    h3 { color: #666; margin-top: 0; font-weight: normal; font-size: 1.1em; }
    
    /* --- INPUT & RESET --- */
    .input-container { position: relative; margin-top: 20px; }
    input[type="text"] { width: 100%; padding: 15px; font-size: 16px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; }
    
    .reset-btn { 
        display: block; 
        margin-top: 10px; 
        background: none; 
        border: none; 
        color: #666; 
        cursor: pointer; 
        font-size: 14px; 
        text-decoration: underline; 
        padding: 5px;
    }
    .reset-btn:hover { color: #800000; }

    /* --- SUGGESTIES --- */
    #addressSuggestions { display: none; border: 1px solid #ddd; background: white; position: absolute; width: 100%; z-index: 100; box-shadow: 0 4px 6px rgba(0,0,0,0.1); top: 100%; left: 0; }
    .suggestion-item { padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #eee; }
    .suggestion-item:hover { background-color: #f9f9f9; color: #800000; }

    /* --- KAART & KEUZE BLOK --- */
    #results { display: none; margin-top: 30px; }
    
    .map-box { background: white; border: 1px solid #ddd; padding: 25px; border-radius: 12px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    
    .btn-map { display: inline-block; background: #800000; color: white; padding: 14px 30px; text-decoration: none; border-radius: 6px; font-weight: bold; font-size: 18px; margin: 10px 0; transition: background 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .btn-map:hover { background: #600000; transform: translateY(-1px); }

    .alert-box { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; padding: 15px; margin: 20px 0; border-radius: 6px; font-weight: bold; }

    /* --- KEUZE KNOPPEN (INLINE) --- */
    .choice-buttons { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 15px; }
    .btn-choice { padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 15px; border: 2px solid; background: white; transition: all 0.2s; min-width: 120px; }
    .btn-choice:hover { transform: translateY(-2px); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

    .btn-fibre { border-color: #5b6cba; color: #5b6cba; } .btn-fibre:hover { background: #5b6cba; color: white; }
    .btn-dsl { border-color: #28a745; color: #28a745; } .btn-dsl:hover { background: #28a745; color: white; }
    .btn-none { border-color: #6c757d; color: #6c757d; } .btn-none:hover { background: #6c757d; color: white; }

    /* --- TABEL STIJL --- */
    /* Overbodige tabelstijlen verwijderd voor schonere code, we gebruiken nu cards */
    
    .provider-name { font-weight: bold; color: #333; display: block; margin-bottom: 4px; text-decoration: none; }
    .provider-name:hover { text-decoration: underline; color: #0056b3; }
    
    .tech-header { margin-top: 40px; margin-bottom: 15px; font-size: 18px; color: #800000; border-bottom: 2px solid #800000; display: inline-block; padding-bottom: 5px; }

    /* --- ADVIES KAARTEN --- */
    .tech-card { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #eee; }
    .pill { display: inline-block; padding: 4px 10px; border-radius: 15px; font-size: 12px; font-weight: bold; text-transform: uppercase; margin-bottom: 10px; color: white; background: #800000; }
    .links-list a { display: block; color: #0056b3; text-decoration: none; padding: 5px 0; border-bottom: 1px dotted #eee; }
    .links-list a:hover { text-decoration: underline; color: #003d82; }

    footer { margin-top: 60px; text-align: center; font-size: 12px; color: #999; border-top: 1px solid #eee; padding-top: 20px; }
</style>
</head>
<body>

    <h1>Internetverbinding</h1>
    <h3>Dataverbinding Frankrijk</h3>
    <p>Vul uw adres in. Wij openen de offici√´le kaart. Wat u daar ziet, vertalen wij hier naar een duidelijk overzicht.</p>

    <div class="input-container">
        <input id="addressInput" type="text" placeholder="Bijv. 12 Quai de la Somme Amiens" autocomplete="off">
        <div id="addressSuggestions"></div>
        <button class="reset-btn" onclick="resetTool()">üîÑ Opnieuw zoeken</button>
    </div>

    <div id="results">
        <div id="mapInstruction"></div>
        <div id="finalAdvice"></div>
    </div>

    <footer>Mogelijk gemaakt door Infofrankrijk.com en Nederlanders.fr</footer>

    <script>
        // --- 1. HARDE DATA ---
        const providers = {
            fibre: [
                { n: "Orange Fibre", u: "https://boutique.orange.fr/internet/offres-fibre" },
                { n: "SFR Fibre", u: "https://www.sfr.fr/offre-internet.html" },
                { n: "Bouygues Fibre", u: "https://www.bouyguestelecom.fr/offres-internet/fibre" },
                { n: "Free Fibre", u: "https://www.free.fr/freebox/" }
            ],
            dsl: [
                { n: "Orange ADSL", u: "https://boutique.orange.fr/internet" },
                { n: "SFR ADSL", u: "https://www.sfr.fr/offre-internet.html" },
                { n: "Bouygues ADSL", u: "https://www.bouyguestelecom.fr/offres-internet/adsl" },
                { n: "Free ADSL", u: "https://www.free.fr/freebox/" }
            ],
            starlink: { n: "Starlink", u: "https://www.starlink.com/" },
            nordnet: { n: "Nordnet", u: "https://www.nordnet.com/" },
            // AANGEPAST: Orange link vervangen door overheidsinfo zoals gevraagd
            box4g: [
                { n: "Info 4G/5G (Overheid)", u: "https://www.economie.gouv.fr/le-deploiement-de-la-5g-bis" },
                { n: "Bouygues 4G Box", u: "https://www.bouyguestelecom.fr/offres-internet/4g-box" }
            ]
        };

        // --- 2. ZOEKFUNCTIE (BAN) ---
        const input = document.getElementById('addressInput');
        const suggestions = document.getElementById('addressSuggestions');
        let debounce;

        input.addEventListener('input', function() {
            clearTimeout(debounce);
            const q = this.value;
            if (q.length < 3) { suggestions.style.display = 'none'; return; }
            
            debounce = setTimeout(() => {
                fetch(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(q)}&limit=5`)
                    .then(r => r.json())
                    .then(data => {
                        suggestions.innerHTML = '';
                        if(data.features && data.features.length > 0) {
                            suggestions.style.display = 'block';
                            data.features.forEach(f => {
                                const div = document.createElement('div');
                                div.className = 'suggestion-item';
                                div.innerHTML = `<strong>${f.properties.label}</strong>`;
                                div.onclick = () => selectAddress(f);
                                suggestions.appendChild(div);
                            });
                        } else {
                            suggestions.style.display = 'none';
                        }
                    });
            }, 300);
        });

        // --- 3. RESET FUNCTIE ---
        function resetTool() {
            input.value = '';
            document.getElementById('results').style.display = 'none';
            document.getElementById('mapInstruction').innerHTML = '';
            document.getElementById('finalAdvice').innerHTML = '';
            suggestions.style.display = 'none';
            input.focus();
        }

        function selectAddress(feature) {
            suggestions.style.display = 'none';
            input.value = feature.properties.label;
            const [lon, lat] = feature.geometry.coordinates;

            // Reset UI
            document.getElementById('results').style.display = 'block';
            document.getElementById('finalAdvice').innerHTML = '';

            const arcepUrl = `https://maconnexioninternet.arcep.fr/?lat=${lat}&lng=${lon}&zoom=20&mode=debit&techno=filaire`;
            
            // HIER STAAT NU ALLES BIJ ELKAAR: Instructie -> Knop -> Vragen
            document.getElementById('mapInstruction').innerHTML = `
                <div class="map-box">
                    <h3 style="margin-top:0; color:#004085;">Stap 1: Controle</h3>
                    <p>Klik op de knop. De offici√´le kaart opent in een nieuw venster.<br>Kijk welk bolletje u ziet.</p>
                    
                    <a href="${arcepUrl}" target="_blank" class="btn-map">üìç Open Kaart</a>
                    
                    <div class="alert-box">
                        ‚ö†Ô∏è BELANGRIJK:<br>Kom daarna terug in dit tabblad om de gevonden kleurcode aan te vinken!
                    </div>

                    <p style="font-weight:bold; margin-bottom:10px;">Stap 2: Wat zag u op de kaart?</p>
                    <div class="choice-buttons">
                        <button class="btn-choice btn-fibre" onclick="showResult('fibre')">üîµ/üü£ Fibre</button>
                        <button class="btn-choice btn-dsl" onclick="showResult('dsl')">üü¢ DSL (Koper)</button>
                        <button class="btn-choice btn-none" onclick="showResult('none')">‚ö™ Grijs / Niets</button>
                    </div>
                </div>
            `;
            
            // Scroll
            document.getElementById('mapInstruction').scrollIntoView({ behavior: 'smooth' });
        }

        // --- 4. RESULTAAT ALS TABEL ---
        window.showResult = function(type) {
            const container = document.getElementById('finalAdvice');
            
            // Helper functies
            const makeLinks = (list) => list.map(i => `<a href="${i.u}" target="_blank">${i.n} &rarr;</a>`).join('');
            
            let html = '';

            // --- SCENARIO 1: FIBRE (Blauw/Paars bolletje) ---
            if (type === 'fibre') {
                html += `
                    <div style="padding:15px; background:#e8eaf6; border-radius:8px; color:#283593; margin:20px 0; border:1px solid #c5cae9;">
                        <strong>‚úÖ Glasvezel Beschikbaar!</strong><br>Hieronder de maximale snelheden op uw adres.
                    </div>
                    <div class="tech-card">
                        <span class="pill">Aanbevolen</span>
                        <h3>Glasvezel Providers</h3>
                        <p>Stabiel, snel en geschikt voor TV, werken en gamen.</p>
                        <div class="links-list">${makeLinks(providers.fibre)}</div>
                    </div>
                `;
            }
            
            // --- SCENARIO 2: DSL (Groen bolletje) ---
            else if (type === 'dsl') {
                html += `
                    <div style="padding:15px; background:#e8f5e9; border-radius:8px; color:#1b5e20; margin:20px 0; border:1px solid #c8e6c9;">
                        <strong>‚ö†Ô∏è Alleen Koper (DSL).</strong> De snelheid is waarschijnlijk beperkt.
                        <br>Kijk hieronder naar alternatieven zoals 4G of Starlink.
                    </div>

                    <div class="tech-card">
                        <span class="pill">Standaard</span>
                        <h3>ADSL/VDSL</h3>
                        <p>Via de telefoonlijn. Snelheid afhankelijk van afstand.</p>
                        <div class="links-list">${makeLinks(providers.dsl)}</div>
                    </div>

                    <div class="tech-card">
                        <span class="pill">Sneller Alternatief</span>
                        <h3>Starlink</h3>
                        <div class="links-list">${makeLinks(providers.starlink)}</div>
                    </div>
                `;
            } 
            
            // --- SCENARIO 3: NIETS / GRIJS ---
            else {
                html += `
                    <div style="padding:15px; background:#ffebee; border-radius:8px; color:#c62828; margin:20px 0; border:1px solid #ffcdd2;">
                        <strong>‚ùå Buitengebied.</strong> Geen vaste lijn gevonden.
                        <br>U bent aangewezen op Satelliet of 4G.
                    </div>

                    <div class="tech-card">
                        <span class="pill" style="background:#006400;">Beste Oplossing</span>
                        <h3>Starlink</h3>
                        <div class="links-list">${makeLinks(providers.starlink)}</div>
                    </div>

                    <div class="tech-card">
                        <span class="pill">Alternatief</span>
                        <h3>4G Info</h3>
                        <div class="links-list">${makeLinks(providers.box4g)}</div>
                    </div>
                `;
            }

            // TV & VPN
            // Data handmatig opbouwen want providers_fr.json is weg
            const tvList = [
                {n: "NLZIET", u: "https://www.nlziet.nl/"},
                {n: "Canal Digitaal", u: "https://www.canaldigitaal.nl/"}
            ];
            const vpnList = [
                {n: "NordVPN", u: "https://nordvpn.com/"},
                {n: "Surfshark", u: "https://surfshark.com/"}
            ];

            html += `
                <div class="tech-header" style="margin-top:40px; border-color:#666; color:#666;">Extra Diensten</div>
                <div style="display:flex; gap:20px; flex-wrap:wrap;">
                    <div style="flex:1; min-width:250px; background:white; padding:15px; border:1px solid #eee; border-radius:8px;">
                        <strong>üì∫ Nederlandse TV</strong><br>
                        ${makeLinks(tvList)}
                    </div>
                    <div style="flex:1; min-width:250px; background:white; padding:15px; border:1px solid #eee; border-radius:8px;">
                        <strong>üîí Veiligheid & VPN</strong><br>
                        ${makeLinks(vpnList)}
                    </div>
                </div>
            `;

            container.innerHTML = html;
            container.scrollIntoView({ behavior: 'smooth' });
        }
    </script>

</body>
</html>
