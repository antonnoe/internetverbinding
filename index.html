<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Internetverbinding ‚Äì Dataverbinding Frankrijk</title>
<style>
    /* --- BASIS STIJL --- */
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background-color: #f4f4f9; color: #333; max-width: 800px; margin: 0 auto; padding-bottom: 160px; }
    h1 { color: #800000; margin-bottom: 5px; }
    h3 { color: #666; margin-top: 0; font-weight: normal; font-size: 1.1em; }
    
    /* --- INPUT --- */
    .input-group { position: relative; margin-top: 20px; }
    input[type="text"] { width: 100%; padding: 15px; font-size: 16px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; }
    
    /* --- SUGGESTIES --- */
    #addressSuggestions { display: none; border: 1px solid #ddd; background: white; position: absolute; width: 100%; z-index: 100; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .suggestion-item { padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #eee; }
    .suggestion-item:hover { background-color: #f9f9f9; color: #800000; }

    /* --- TABEL STIJL (Zoals ARCEP) --- */
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    th { background: #f1f1f1; color: #555; font-weight: 600; text-align: left; padding: 12px; font-size: 13px; text-transform: uppercase; border-bottom: 2px solid #ddd; }
    td { padding: 12px; border-bottom: 1px solid #eee; vertical-align: middle; }
    tr:last-child td { border-bottom: none; }
    
    .provider-name { font-weight: bold; color: #333; display: block; margin-bottom: 4px; }
    .speed-tag { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; color: white; text-align: center; min-width: 80px; }
    
    .bg-blue { background-color: #5c6bc0; } /* Fibre snelheid */
    .bg-cyan { background-color: #26c6da; } /* Upload / Cable */
    .bg-green { background-color: #66bb6a; } /* DSL / Satelliet laag */
    .bg-yellow { background-color: #fdd835; color: #333; } /* Upload laag */

    .tech-header { margin-top: 30px; margin-bottom: 10px; font-size: 18px; color: #800000; border-bottom: 2px solid #800000; display: inline-block; padding-bottom: 5px; }

    /* --- KNOPPEN BALK --- */
    #stickyContainer { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: #fff; border-top: 4px solid #800000; padding: 15px 10px; text-align: center; z-index: 10000; box-shadow: 0 -5px 20px rgba(0,0,0,0.2); }
    .sticky-buttons { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
    .sticky-btn { padding: 10px 16px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 14px; border: 2px solid; background: white; }
    
    /* Kleuren knoppen */
    .btn-fibre { border-color: #5b6cba; color: #5b6cba; } .btn-fibre:hover { background: #5b6cba; color: white; }
    .btn-dsl { border-color: #28a745; color: #28a745; } .btn-dsl:hover { background: #28a745; color: white; }
    .btn-none { border-color: #6c757d; color: #6c757d; } .btn-none:hover { background: #6c757d; color: white; }

    a { text-decoration: none; color: inherit; }
    .btn-link { color: #0056b3; font-size: 13px; } .btn-link:hover { text-decoration: underline; }
    
    footer { margin-top: 50px; text-align: center; font-size: 12px; color: #999; border-top: 1px solid #eee; padding-top: 20px; }
</style>
</head>
<body>

    <h1>Internetverbinding</h1>
    <h3>Dataverbinding Frankrijk</h3>
    <p>Vul uw adres in. Wij openen de offici√´le kaart. Wat u daar ziet, vertalen wij hier naar een duidelijk overzicht.</p>

    <div class="input-group">
        <input id="addressInput" type="text" placeholder="Bijv. 32 Boulevard de Strasbourg, Montpellier" autocomplete="off">
        <div id="addressSuggestions"></div>
    </div>

    <div id="results" style="display:none; margin-top:30px;">
        <div id="mapInstruction"></div>
        <div id="finalAdvice"></div>
    </div>

    <div id="stickyContainer">
        <div style="margin-bottom: 8px; font-weight: bold; color: #555;">Wat ziet u op de kaart?</div>
        <div class="sticky-buttons">
            <button class="sticky-btn btn-fibre" onclick="showResult('fibre')">üîµ/üü¢ Fibre/Kabel</button>
            <button class="sticky-btn btn-dsl" onclick="showResult('dsl')">üü° DSL (Koper)</button>
            <button class="sticky-btn btn-none" onclick="showResult('none')">‚ö™ Grijs / Niets</button>
        </div>
    </div>

    <footer>Mogelijk gemaakt door Infofrankrijk.com en Nederlanders.fr</footer>

    <script>
        // --- 1. HARDE DATA ---
        const providers = {
            fibre: [
                { n: "Orange", u: "https://boutique.orange.fr/internet/offres-fibre" },
                { n: "SFR", u: "https://www.sfr.fr/offre-internet.html" },
                { n: "Bouygues", u: "https://www.bouyguestelecom.fr/offres-internet/fibre" },
                { n: "Free", u: "https://www.free.fr/freebox/" }
            ],
            dsl: [
                { n: "Orange", u: "https://boutique.orange.fr/internet" },
                { n: "SFR", u: "https://www.sfr.fr/offre-internet.html" },
                { n: "Bouygues", u: "https://www.bouyguestelecom.fr/offres-internet/adsl" },
                { n: "Free", u: "https://www.free.fr/freebox/" }
            ],
            starlink: { n: "Starlink", u: "https://www.starlink.com/" },
            nordnet: { n: "Nordnet", u: "https://www.nordnet.com/" },
            box4g: { n: "4G/5G Box (Div)", u: "https://boutique.orange.fr/internet/offres-4g-home" }
        };

        // --- 2. ZOEKFUNCTIE (BAN) ---
        const input = document.getElementById('addressInput');
        const suggestions = document.getElementById('addressSuggestions');
        let debounce;

        input.addEventListener('input', function() {
            clearTimeout(debounce);
            const q = this.value;
            if (q.length < 3) { suggestions.style.display = 'none'; return; }
            
            debounce = setTimeout(() => {
                fetch(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(q)}&limit=5`)
                    .then(r => r.json())
                    .then(data => {
                        suggestions.innerHTML = '';
                        if(data.features && data.features.length > 0) {
                            suggestions.style.display = 'block';
                            data.features.forEach(f => {
                                const div = document.createElement('div');
                                div.className = 'suggestion-item';
                                div.innerHTML = `<strong>${f.properties.label}</strong>`;
                                div.onclick = () => selectAddress(f);
                                suggestions.appendChild(div);
                            });
                        } else {
                            suggestions.style.display = 'none';
                        }
                    });
            }, 300);
        });

        function selectAddress(feature) {
            suggestions.style.display = 'none';
            input.value = feature.properties.label;
            const [lon, lat] = feature.geometry.coordinates;

            // Reset UI
            document.getElementById('results').style.display = 'block';
            document.getElementById('finalAdvice').innerHTML = '';
            document.getElementById('stickyContainer').style.display = 'block';

            const arcepUrl = `https://maconnexioninternet.arcep.fr/?lat=${lat}&lng=${lon}&zoom=20&mode=debit&techno=filaire`;
            
            document.getElementById('mapInstruction').innerHTML = `
                <div class="map-box" style="background:#f0f7ff; border:1px solid #cce5ff; padding:20px; border-radius:8px; text-align:center;">
                    <h3 style="margin-top:0; color:#004085;">Stap 1: Controle</h3>
                    <p>Klik op de knop. De offici√´le kaart opent in een nieuw venster.<br>Kijk welk bolletje u ziet.</p>
                    <a href="${arcepUrl}" target="_blank" class="btn-map" style="display:inline-block; background:#800000; color:white; padding:12px 25px; text-decoration:none; border-radius:6px; font-weight:bold;">üìç Open Kaart</a>
                </div>
            `;
        }

        // --- 3. RESULTAAT ALS TABEL (REPRODUCTIE ARCEP) ---
        window.showResult = function(type) {
            document.getElementById('stickyContainer').style.display = 'none';
            const container = document.getElementById('finalAdvice');
            
            // Functie om rijen te maken
            const row = (prov, dl, ul) => `
                <tr>
                    <td><a href="${prov.u}" target="_blank" class="provider-name">${prov.n} &rarr;</a></td>
                    <td><span class="speed-tag ${getColor(dl)}">${dl}</span></td>
                    <td><span class="speed-tag ${getColor(ul)}">${ul}</span></td>
                </tr>`;

            // Kleur bepalen
            const getColor = (txt) => {
                if(txt.includes('Gbit') || txt.includes('100 Mbit')) return 'bg-blue';
                if(txt.includes('30 Mbit')) return 'bg-cyan';
                return 'bg-green';
            };

            let html = '';

            // --- SCENARIO 1: FIBRE (Het droomscenario) ---
            if (type === 'fibre') {
                html += `
                    <div style="padding:15px; background:#e8eaf6; border-radius:8px; color:#283593; margin:20px 0;">
                        <strong>‚úÖ Glasvezel Beschikbaar!</strong> Hieronder de maximale snelheden op uw adres.
                    </div>
                    <div class="tech-header">Fibre (Glasvezel)</div>
                    <table>
                        <thead><tr><th>Provider</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${providers.fibre.map(p => row(p, "1 Gbit/s +", "500 Mbit/s +")).join('')}
                        </tbody>
                    </table>
                    <div style="font-size:12px; color:#666;">* Snelheden zijn theoretische maxima.</div>
                `;
            }
            
            // --- SCENARIO 2: DSL (Koper) ---
            else if (type === 'dsl') {
                html += `
                    <div style="padding:15px; background:#fff3cd; border-radius:8px; color:#856404; margin:20px 0;">
                        <strong>‚ö†Ô∏è Alleen Koper (DSL).</strong> De snelheid is waarschijnlijk beperkt (< 20 Mbit/s).
                        <br>Kijk hieronder naar alternatieven zoals 4G of Starlink.
                    </div>

                    <div class="tech-header">DSL (Koperlijn)</div>
                    <table>
                        <thead><tr><th>Provider</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${providers.dsl.map(p => row(p, "ca. 15 Mbit/s", "1 Mbit/s")).join('')}
                        </tbody>
                    </table>

                    <div class="tech-header">Alternatieven (Sneller)</div>
                    <table>
                        <thead><tr><th>Technologie</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${row(providers.starlink, "100 Mbit/s +", "20 Mbit/s +")}
                            ${row(providers.box4g, "tot 150 Mbit/s", "tot 50 Mbit/s")}
                        </tbody>
                    </table>
                `;
            } 
            
            // --- SCENARIO 3: NIETS / GRIJS ---
            else {
                html += `
                    <div style="padding:15px; background:#ffebee; border-radius:8px; color:#c62828; margin:20px 0;">
                        <strong>‚ùå Buitengebied.</strong> Geen vaste lijn gevonden.
                        <br>U bent aangewezen op Satelliet of 4G.
                    </div>

                    <div class="tech-header">Satelliet & 4G</div>
                    <table>
                        <thead><tr><th>Provider</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${row(providers.starlink, "100 Mbit/s +", "20 Mbit/s +")}
                            ${row(providers.nordnet, "tot 100 Mbit/s", "5 Mbit/s")}
                            ${row(providers.box4g, "Afhankelijk van 4G", "Variabel")}
                        </tbody>
                    </table>
                `;
            }

            // TV & VPN Blokje
            html += `
                <div class="tech-header" style="margin-top:40px; border-color:#666; color:#666;">Extra Diensten</div>
                <div style="display:flex; gap:20px; flex-wrap:wrap;">
                    <div style="flex:1; min-width:250px; background:white; padding:15px; border:1px solid #eee; border-radius:8px;">
                        <strong>üì∫ Nederlandse TV</strong><br>
                        <a href="https://www.nlziet.nl/" target="_blank" class="btn-link">NLZIET &rarr;</a><br>
                        <a href="https://www.canaldigitaal.nl/" target="_blank" class="btn-link">Canal Digitaal &rarr;</a>
                    </div>
                    <div style="flex:1; min-width:250px; background:white; padding:15px; border:1px solid #eee; border-radius:8px;">
                        <strong>üîí Veiligheid & VPN</strong><br>
                        <a href="https://nordvpn.com/" target="_blank" class="btn-link">NordVPN &rarr;</a><br>
                        <a href="https://surfshark.com/" target="_blank" class="btn-link">Surfshark &rarr;</a>
                    </div>
                </div>
            `;

            container.innerHTML = html;
            container.scrollIntoView({ behavior: 'smooth' });
        }
    </script>

</body>
</html>
