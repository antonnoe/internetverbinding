<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Internetverbinding ‚Äì Dataverbinding Frankrijk</title>
<style>
    /* --- BASIS STIJL --- */
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background-color: #f4f4f9; color: #333; max-width: 800px; margin: 0 auto; padding-bottom: 100px; }
    h1 { color: #800000; margin-bottom: 5px; }
    h3 { color: #666; margin-top: 0; font-weight: normal; font-size: 1.1em; }
    
    /* --- INPUT & RESET --- */
    .input-container { position: relative; margin-top: 20px; }
    input[type="text"] { width: 100%; padding: 15px; font-size: 16px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; }
    
    .reset-btn { 
        display: block; 
        margin-top: 10px; 
        background: none; 
        border: none; 
        color: #666; 
        cursor: pointer; 
        font-size: 14px; 
        text-decoration: underline; 
        padding: 5px;
    }
    .reset-btn:hover { color: #800000; }

    /* --- SUGGESTIES --- */
    #addressSuggestions { display: none; border: 1px solid #ddd; background: white; position: absolute; width: 100%; z-index: 100; box-shadow: 0 4px 6px rgba(0,0,0,0.1); top: 100%; left: 0; }
    .suggestion-item { padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #eee; }
    .suggestion-item:hover { background-color: #f9f9f9; color: #800000; }

    /* --- KAART & KEUZE BLOK --- */
    #results { display: none; margin-top: 30px; }
    
    .map-box { background: white; border: 1px solid #ddd; padding: 25px; border-radius: 12px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    
    .btn-map { display: inline-block; background: #800000; color: white; padding: 14px 30px; text-decoration: none; border-radius: 6px; font-weight: bold; font-size: 18px; margin: 10px 0; transition: background 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .btn-map:hover { background: #600000; transform: translateY(-1px); }

    .alert-box { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; padding: 15px; margin: 20px 0; border-radius: 6px; font-weight: bold; }

    /* --- KEUZE KNOPPEN (INLINE) --- */
    .choice-buttons { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 15px; }
    .btn-choice { padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 15px; border: 2px solid; background: white; transition: all 0.2s; min-width: 120px; }
    .btn-choice:hover { transform: translateY(-2px); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

    .btn-fibre { border-color: #5b6cba; color: #5b6cba; } .btn-fibre:hover { background: #5b6cba; color: white; }
    .btn-dsl { border-color: #28a745; color: #28a745; } .btn-dsl:hover { background: #28a745; color: white; }
    .btn-none { border-color: #6c757d; color: #6c757d; } .btn-none:hover { background: #6c757d; color: white; }

    /* --- TABEL STIJL --- */
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-top: 10px; }
    th { background: #f1f1f1; color: #555; font-weight: 600; text-align: left; padding: 12px; font-size: 13px; text-transform: uppercase; border-bottom: 2px solid #ddd; }
    td { padding: 12px; border-bottom: 1px solid #eee; vertical-align: middle; }
    
    .provider-name { font-weight: bold; color: #333; display: block; margin-bottom: 4px; text-decoration: none; }
    .provider-name:hover { text-decoration: underline; color: #0056b3; }
    .speed-tag { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; color: white; text-align: center; min-width: 80px; }
    
    .bg-blue { background-color: #5c6bc0; }
    .bg-cyan { background-color: #26c6da; }
    .bg-green { background-color: #66bb6a; }
    
    .tech-header { margin-top: 40px; margin-bottom: 15px; font-size: 18px; color: #800000; border-bottom: 2px solid #800000; display: inline-block; padding-bottom: 5px; }

    /* --- LINKJES ONDERAAN --- */
    .btn-link { color: #0056b3; font-size: 14px; text-decoration: none; } 
    .btn-link:hover { text-decoration: underline; }

    footer { margin-top: 60px; text-align: center; font-size: 12px; color: #999; border-top: 1px solid #eee; padding-top: 20px; }
</style>
</head>
<body>

    <h1>Internetverbinding</h1>
    <h3>Dataverbinding Frankrijk</h3>
    <p>Vul uw adres in. Wij openen de offici√´le kaart. Wat u daar ziet, vertalen wij hier naar een duidelijk overzicht.</p>

    <div class="input-container">
        <input id="addressInput" type="text" placeholder="Bijv. 22 Rue de Sehen, Montcavrel" autocomplete="off">
        <div id="addressSuggestions"></div>
        <button class="reset-btn" onclick="resetTool()">üîÑ Opnieuw zoeken</button>
    </div>

    <div id="results">
        <div id="mapInstruction"></div>
        <div id="finalAdvice"></div>
    </div>

    <footer>Mogelijk gemaakt door Infofrankrijk.com en Nederlanders.fr</footer>

    <script>
        // --- 1. HARDE DATA ---
        const providers = {
            fibre: [
                { n: "Orange", u: "https://boutique.orange.fr/internet/offres-fibre" },
                { n: "SFR", u: "https://www.sfr.fr/offre-internet.html" },
                { n: "Bouygues", u: "https://www.bouyguestelecom.fr/offres-internet/fibre" },
                { n: "Free", u: "https://www.free.fr/freebox/" }
            ],
            dsl: [
                { n: "Orange", u: "https://boutique.orange.fr/internet" },
                { n: "SFR", u: "https://www.sfr.fr/offre-internet.html" },
                { n: "Bouygues", u: "https://www.bouyguestelecom.fr/offres-internet/adsl" },
                { n: "Free", u: "https://www.free.fr/freebox/" }
            ],
            starlink: { n: "Starlink", u: "https://www.starlink.com/" },
            nordnet: { n: "Nordnet", u: "https://www.nordnet.com/" },
            box4g: { n: "4G/5G Box (Div)", u: "https://boutique.orange.fr/internet/offres-4g-home" }
        };

        // --- 2. ZOEKFUNCTIE (BAN) ---
        const input = document.getElementById('addressInput');
        const suggestions = document.getElementById('addressSuggestions');
        let debounce;

        input.addEventListener('input', function() {
            clearTimeout(debounce);
            const q = this.value;
            if (q.length < 3) { suggestions.style.display = 'none'; return; }
            
            debounce = setTimeout(() => {
                fetch(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(q)}&limit=5`)
                    .then(r => r.json())
                    .then(data => {
                        suggestions.innerHTML = '';
                        if(data.features && data.features.length > 0) {
                            suggestions.style.display = 'block';
                            data.features.forEach(f => {
                                const div = document.createElement('div');
                                div.className = 'suggestion-item';
                                div.innerHTML = `<strong>${f.properties.label}</strong>`;
                                div.onclick = () => selectAddress(f);
                                suggestions.appendChild(div);
                            });
                        } else {
                            suggestions.style.display = 'none';
                        }
                    });
            }, 300);
        });

        // --- 3. RESET FUNCTIE ---
        function resetTool() {
            input.value = '';
            document.getElementById('results').style.display = 'none';
            document.getElementById('mapInstruction').innerHTML = '';
            document.getElementById('finalAdvice').innerHTML = '';
            suggestions.style.display = 'none';
            input.focus();
        }

        function selectAddress(feature) {
            suggestions.style.display = 'none';
            input.value = feature.properties.label;
            const [lon, lat] = feature.geometry.coordinates;

            // Reset UI
            document.getElementById('results').style.display = 'block';
            document.getElementById('finalAdvice').innerHTML = '';

            const arcepUrl = `https://maconnexioninternet.arcep.fr/?lat=${lat}&lng=${lon}&zoom=20&mode=debit&techno=filaire`;
            
            // HIER STAAT NU ALLES BIJ ELKAAR: Instructie -> Knop -> Vragen
            document.getElementById('mapInstruction').innerHTML = `
                <div class="map-box">
                    <h3 style="margin-top:0; color:#004085;">Stap 1: Controle</h3>
                    <p>Klik op de knop. De offici√´le kaart opent in een nieuw venster.<br>Kijk welk bolletje u ziet.</p>
                    
                    <a href="${arcepUrl}" target="_blank" class="btn-map">üìç Open Kaart</a>
                    
                    <div class="alert-box">
                        ‚ö†Ô∏è BELANGRIJK:<br>Kom daarna terug in dit tabblad om de gevonden kleurcode aan te vinken!
                    </div>

                    <p style="font-weight:bold; margin-bottom:10px;">Stap 2: Wat zag u op de kaart?</p>
                    <div class="choice-buttons">
                        <button class="btn-choice btn-fibre" onclick="showResult('fibre')">üîµ/üü£ Fibre</button>
                        <button class="btn-choice btn-dsl" onclick="showResult('dsl')">üü¢ DSL (Koper)</button>
                        <button class="btn-choice btn-none" onclick="showResult('none')">‚ö™ Grijs / Niets</button>
                    </div>
                </div>
            `;
            
            // Scroll
            document.getElementById('mapInstruction').scrollIntoView({ behavior: 'smooth' });
        }

        // --- 4. RESULTAAT ALS TABEL ---
        window.showResult = function(type) {
            const container = document.getElementById('finalAdvice');
            
            // Helper functies
            const row = (prov, dl, ul) => `
                <tr>
                    <td><a href="${prov.u}" target="_blank" class="provider-name">${prov.n} &rarr;</a></td>
                    <td><span class="speed-tag ${getColor(dl)}">${dl}</span></td>
                    <td><span class="speed-tag ${getColor(ul)}">${ul}</span></td>
                </tr>`;

            const getColor = (txt) => {
                if(txt.includes('Gbit') || txt.includes('100 Mbit')) return 'bg-blue';
                if(txt.includes('30 Mbit')) return 'bg-cyan';
                return 'bg-green';
            };

            let html = '';

            // --- SCENARIO 1: FIBRE (Blauw/Paars bolletje) ---
            if (type === 'fibre') {
                html += `
                    <div style="padding:15px; background:#e8eaf6; border-radius:8px; color:#283593; margin:20px 0; border:1px solid #c5cae9;">
                        <strong>‚úÖ Glasvezel Beschikbaar!</strong><br>Hieronder de maximale snelheden op uw adres.
                    </div>
                    <div class="tech-header">Fibre (Glasvezel)</div>
                    <table>
                        <thead><tr><th>Provider</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${providers.fibre.map(p => row(p, "1 Gbit/s +", "500 Mbit/s +")).join('')}
                        </tbody>
                    </table>
                    <div style="font-size:12px; color:#666;">* Snelheden zijn theoretische maxima.</div>
                `;
            }
            
            // --- SCENARIO 2: DSL (Groen bolletje) ---
            else if (type === 'dsl') {
                html += `
                    <div style="padding:15px; background:#e8f5e9; border-radius:8px; color:#1b5e20; margin:20px 0; border:1px solid #c8e6c9;">
                        <strong>‚ö†Ô∏è Alleen Koper (DSL).</strong> De snelheid is waarschijnlijk beperkt.
                        <br>Kijk hieronder naar alternatieven zoals 4G of Starlink.
                    </div>

                    <div class="tech-header">DSL (Koperlijn)</div>
                    <table>
                        <thead><tr><th>Provider</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${providers.dsl.map(p => row(p, "ca. 15 Mbit/s", "1 Mbit/s")).join('')}
                        </tbody>
                    </table>

                    <div class="tech-header">Alternatieven (Sneller)</div>
                    <table>
                        <thead><tr><th>Technologie</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${row(providers.starlink, "100 Mbit/s +", "20 Mbit/s +")}
                            ${row(providers.box4g, "tot 150 Mbit/s", "tot 50 Mbit/s")}
                        </tbody>
                    </table>
                `;
            } 
            
            // --- SCENARIO 3: NIETS / GRIJS ---
            else {
                html += `
                    <div style="padding:15px; background:#ffebee; border-radius:8px; color:#c62828; margin:20px 0; border:1px solid #ffcdd2;">
                        <strong>‚ùå Buitengebied.</strong> Geen vaste lijn gevonden.
                        <br>U bent aangewezen op Satelliet of 4G.
                    </div>

                    <div class="tech-header">Satelliet & 4G</div>
                    <table>
                        <thead><tr><th>Provider</th><th>Download</th><th>Upload</th></tr></thead>
                        <tbody>
                            ${row(providers.starlink, "100 Mbit/s +", "20 Mbit/s +")}
                            ${row(providers.nordnet, "tot 100 Mbit/s", "5 Mbit/s")}
                            ${row(providers.box4g, "Afhankelijk van 4G", "Variabel")}
                        </tbody>
                    </table>
                `;
            }

            // TV & VPN
            html += `
                <div class="tech-header" style="margin-top:40px; border-color:#666; color:#666;">Extra Diensten</div>
                <div style="display:flex; gap:20px; flex-wrap:wrap;">
                    <div style="flex:1; min-width:250px; background:white; padding:15px; border:1px solid #eee; border-radius:8px;">
                        <strong>üì∫ Nederlandse TV</strong><br>
                        <a href="https://www.nlziet.nl/" target="_blank" class="btn-link">NLZIET &rarr;</a><br>
                        <a href="https://www.canaldigitaal.nl/" target="_blank" class="btn-link">Canal Digitaal &rarr;</a>
                    </div>
                    <div style="flex:1; min-width:250px; background:white; padding:15px; border:1px solid #eee; border-radius:8px;">
                        <strong>üîí Veiligheid & VPN</strong><br>
                        <a href="https://nordvpn.com/" target="_blank" class="btn-link">NordVPN &rarr;</a><br>
                        <a href="https://surfshark.com/" target="_blank" class="btn-link">Surfshark &rarr;</a>
                    </div>
                </div>
            `;

            container.innerHTML = html;
            container.scrollIntoView({ behavior: 'smooth' });
        }
    </script>

</body>
</html>
