<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Internetverbinding ‚Äì Dataverbinding Frankrijk</title>
  <meta name="description" content="Check uw internetmogelijkheden in Frankrijk. Informatie over Fibre, 4G, Starlink en Nederlandse TV.">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #ffffff;
      color: #000000;
      margin: 0;
      padding: 20px;
      line-height: 1.5;
    }
    h1, h2 { color: #800000; margin-top: 0; }
    h3 { color: #555555; }
    .subtitle { color: #777777; margin-top: 4px; margin-bottom: 20px; }
    .container { max-width: 960px; margin: 0 auto; }
    
    /* Introductie */
    .intro-box {
      background: #f8f8f8;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 24px;
    }
    
    .info-blue-box {
      background: #e3f2fd; 
      border-left: 4px solid #2196f3; 
      padding: 10px; 
      font-size: 14px; 
      color: #0d47a1;
      margin-top: 10px;
    }

    /* Zoekveld en Dropdown styling */
    .search-container {
      position: relative;
      max-width: 100%;
      margin-bottom: 30px;
    }
    label { font-weight: bold; display: block; margin-bottom: 6px; }
    
    .input-group {
      display: flex;
      gap: 10px;
    }
    input[type="text"] {
      flex-grow: 1;
      padding: 12px;
      font-size: 16px;
      border-radius: 4px;
      border: 1px solid #cccccc;
    }
    button.search-btn {
      background: #800000;
      color: #ffffff;
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      white-space: nowrap;
    }
    button.search-btn:hover { opacity: 0.95; }

    /* De dropdown lijst met suggesties */
    #addressSuggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: #fff;
      border: 1px solid #ccc;
      border-top: none;
      border-radius: 0 0 4px 4px;
      z-index: 1000;
      max-height: 250px;
      overflow-y: auto;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      display: none;
    }
    .suggestion-item {
      padding: 10px 12px;
      cursor: pointer;
      border-bottom: 1px solid #eee;
    }
    .suggestion-item:last-child { border-bottom: none; }
    .suggestion-item:hover { background-color: #f2e6e6; }
    .suggestion-context { font-size: 0.85em; color: #666; float: right; }

    .helper-text { font-size: 13px; color: #666666; margin-top: 8px; }

    /* Resultaten sectie */
    #results {
      margin-top: 30px;
      border-top: 2px solid #800000;
      padding-top: 20px;
      display: none;
    }
    .address-summary {
      font-size: 16px;
      background: #eef; 
      padding: 10px; 
      border-left: 4px solid #800000;
      margin-bottom: 20px;
    }

    /* Kaarten Grid */
    .tech-grid { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 24px; }
    .tech-card {
      flex: 1 1 260px;
      border: 1px solid #dddddd;
      border-radius: 10px;
      padding: 14px 16px;
      box-sizing: border-box;
      background: #ffffff;
    }
    .tech-card h3 { margin-top: 0; margin-bottom: 8px; color: #800000; }
    .pill {
      display: inline-block; font-size: 12px; padding: 2px 8px;
      border-radius: 999px; background: #f2e6e6; color: #800000; margin-bottom: 8px;
    }
    .tech-card ul { padding-left: 18px; margin: 6px 0; }
    .tech-card li { margin-bottom: 2px; }
    
    .links-list { font-size: 13px; margin-top: 6px; }
    .links-list a { color: #800000; text-decoration: none; }
    .links-list a:hover { text-decoration: underline; }

    /* Tips Boxen */
    .tips-box {
      background: #f9f9f9; border: 1px solid #e0e0e0; border-radius: 8px;
      padding: 14px 16px; margin-bottom: 24px;
    }
    /* Nieuwe stijl voor Bespaartips */
    .savings-box {
      background: #e8f5e9; border: 1px solid #c8e6c9; border-radius: 8px;
      padding: 14px 16px; margin-bottom: 24px;
    }
    .savings-box h3 { color: #2e7d32; margin-top: 0; }

    .forum-box {
      background: #fff3cd; border: 1px solid #ffeeba; border-radius: 8px;
      padding: 14px 16px; margin-bottom: 24px; color: #856404;
    }
    .forum-box a { color: #856404; font-weight: bold; text-decoration: underline; }

    .section { margin-top: 24px; }
    .section ul { padding-left: 18px; }
    .section a { color: #800000; text-decoration: none; }
    .section a:hover { text-decoration: underline; }

    /* Offici√´le check button style */
    .arcep-btn {
      display: block; 
      background: #000091; 
      color: #fff; 
      text-decoration: none; 
      padding: 15px; 
      border-radius: 6px; 
      text-align: center; 
      font-weight: bold;
      transition: background 0.2s;
    }
    .arcep-btn:hover { background: #1a1a9d; }

    footer {
      margin-top: 40px; font-size: 13px; color: #777;
      border-top: 1px solid #ddd; padding-top: 15px;
      line-height: 1.6;
    }

    @media (max-width: 600px) {
      .input-group { flex-direction: column; }
      button.search-btn { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Internetverbinding</h1>
    <div class="subtitle">Dataverbinding Frankrijk</div>

    <div class="intro-box">
      <p>
        Zoek uw Franse adres in de offici√´le database (BAN). Wij tonen u direct welke technologie√´n (Fibre, 4G, Satelliet) in uw regio gebruikelijk zijn.
      </p>
      <div class="info-blue-box">
        <strong>‚ÑπÔ∏è Hoe werkt het?</strong><br>
        Deze tool vindt uw exacte adresgegevens en toont de mogelijkheden. Klik daarna op de knoppen bij de providers om direct op hun site de definitieve beschikbaarheid te zien.
      </div>
    </div>

    <div class="search-container">
      <label for="addressInput">Zoek adres in Frankrijk</label>
      <form onsubmit="event.preventDefault(); fetchAddresses();">
        <div class="input-group">
          <input id="addressInput" type="text" placeholder="Bijv. 5 route du Village..." autocomplete="off">
          <button type="submit" class="search-btn">Zoek Adres</button>
        </div>
        <div id="addressSuggestions"></div>
      </form>
      <div class="helper-text">
        Typ een straat en plaats en druk op Enter (of klik op 'Zoek Adres').
      </div>
    </div>

    <div id="results">
      <h2>Mogelijkheden voor uw locatie</h2>
      
      <div class="address-summary">
        <strong>Geselecteerd adres:</strong> <span id="normalizedAddress"></span><br>
        <span style="font-size:13px; color:#666;">GPS Co√∂rdinaten: <span id="gpsCoords"></span></span>
      </div>

      <div class="tech-grid" id="techCards">
        </div>

      <div class="savings-box">
        <h3>üí° Slimme bespaartips uit de praktijk</h3>
        <ul>
          <li>
            <strong>Bespaar op TV:</strong> Veel Nederlanders in Frankrijk zeggen hun dure satelliet-TV abonnement op (Canal Digitaal) en kijken via apps (zoals NLZIET) op hun smart-TV. Dit vereist wel een stabiele internetverbinding.
          </li>
          <li>
            <strong>Slecht mobiel bereik?</strong> Activeer "Bellen via WiFi" (VoWiFi) op uw smartphone. Zo bent u binnenshuis perfect bereikbaar, ook als de zendmast ver weg is (ideaal i.c.m. Starlink of Fibre).
          </li>
          <li>
            <strong>Lange oprit?</strong> Ligt er glasvezel aan de weg, maar is de aansluiting naar uw huis onbetaalbaar (bijv. >500m)? Dan is Starlink of 4G vaak het enige betaalbare alternatief.
          </li>
          <li>
            <strong>Subsidie checken:</strong> In sommige "witte zones" (geen vast internet mogelijk) vergoedt de Franse staat tot ‚Ç¨150 (of soms meer) op de aanschaf van hardware voor Satelliet of 4G via de regeling <em>"Coh√©sion Num√©rique des Territoires"</em>. Vraag dit na bij de provider.
          </li>
        </ul>
      </div>

      <div class="tips-box">
        <h3>Wat is belangrijk &amp; Prijsindicatie</h3>
        <ul>
          <li>
            <strong>Glasvezel (Fibre):</strong> De beste keuze. Snel en stabiel.<br>
            <em>Prijsindicatie: ‚Ç¨25 ‚Äì ‚Ç¨50 per maand.</em>
          </li>
          <li>
            <strong>4G/5G Box:</strong> Goed alternatief als er geen Fibre is.<br>
            <em>Prijsindicatie: ‚Ç¨30 ‚Äì ‚Ç¨45 per maand.</em>
          </li>
          <li>
            <strong>Starlink (LEO):</strong> Lage vertraging (latency), dus beter voor videobellen dan klassieke satelliet.<br>
            <em>Prijsindicatie: ‚Ç¨40 ‚Äì ‚Ç¨50 per maand + hardware (~‚Ç¨250-450).</em>
          </li>
          <li>
            <strong>Klassieke Satelliet (Nordnet e.a.):</strong> Let op: hogere vertraging (latency), minder geschikt voor videobellen/gamen.<br>
            <em>Prijsindicatie: ‚Ç¨30 ‚Äì ‚Ç¨70 per maand.</em>
          </li>
        </ul>
      </div>

      <div class="forum-box">
        <strong>Praat mee op het forum:</strong><br>
        Lees de ervaringen van anderen (bijv. over Neosat vs Starlink). Bekijk de laatste 20 berichten over dit onderwerp op Nederlanders.fr:<br>
        üëâ <a href="https://www.nederlanders.fr/profiles/blog/list?tag=Telecommunicatie" target="_blank">Nieuwste berichten over Telecommunicatie</a>
      </div>

      <div class="section">
        <h3>Doe de offici√´le dekking-check</h3>
        <p>Gebruik uw gevonden adresgegevens op de offici√´le kaart van de toezichthouder voor 100% zekerheid:</p>
        
        <a href="https://maconnexioninternet.arcep.fr/" target="_blank" class="arcep-btn">
          Onafhankelijke check via Arcep (Ma Connexion Internet) &rarr;
        </a>
        <p style="font-size:13px; margin-top:8px; color:#666;">
          Hier ziet u exact of er glasvezel, koper of alleen 4G beschikbaar is op uw huisnummer.
        </p>
      </div>

      <div class="section">
        <h3>TV & VPN Diensten</h3>
        <ul id="tvList"></ul>
        <ul id="vpnList"></ul>
      </div>
    </div>

    <footer>
      <p>
        Infofrankrijk.com en Nederlanders.fr. Data via api-adresse.data.gouv.fr.<br>
        <strong>Disclaimer:</strong> Wij hebben geen affiliate marketing relatie met de genoemde bedrijven. Deze tool is puur informatief bedoeld.
      </p>
    </footer>
  </div>

  <script>
    let providersData = null;

    // 1. Providers laden
    async function loadProviders() {
      try {
        const res = await fetch("providers_fr.json");
        if (res.ok) providersData = await res.json();
      } catch (e) {
        console.error("Fout laden JSON:", e);
      }
    }

    // 2. Adressen ophalen bij BAN (API)
    async function fetchAddresses() {
      const input = document.getElementById("addressInput");
      const suggestionsBox = document.getElementById("addressSuggestions");
      const query = input.value.trim();

      if (query.length < 3) return;

      suggestionsBox.style.display = "none";
      suggestionsBox.innerHTML = "<div class='suggestion-item'>Zoeken...</div>";
      suggestionsBox.style.display = "block";

      try {
        const url = "https://api-adresse.data.gouv.fr/search/?q=" + encodeURIComponent(query) + "&limit=5";
        const res = await fetch(url);
        if (res.ok) {
          const data = await res.json();
          renderSuggestions(data.features);
        } else {
          suggestionsBox.innerHTML = "<div class='suggestion-item'>Fout bij ophalen adressen.</div>";
        }
      } catch (e) {
        console.error(e);
        suggestionsBox.innerHTML = "<div class='suggestion-item'>Geen verbinding met API.</div>";
      }
    }

    // 3. Suggesties tonen
    function renderSuggestions(features) {
      const suggestionsBox = document.getElementById("addressSuggestions");
      suggestionsBox.innerHTML = "";

      if (!features || features.length === 0) {
        suggestionsBox.innerHTML = "<div class='suggestion-item'>Geen adres gevonden. Probeer postcode + plaats.</div>";
        suggestionsBox.style.display = "block";
        return;
      }

      features.forEach(f => {
        const div = document.createElement("div");
        div.className = "suggestion-item";
        const label = f.properties.label;
        const context = f.properties.context || ""; 
        
        div.innerHTML = `<strong>${label}</strong><span class="suggestion-context">${context}</span>`;
        div.onclick = () => selectAddress(f);
        suggestionsBox.appendChild(div);
      });

      suggestionsBox.style.display = "block";
    }

    // 4. Adres geselecteerd
    function selectAddress(feature) {
      document.getElementById("addressSuggestions").style.display = "none";
      document.getElementById("addressInput").value = feature.properties.label;
      document.getElementById("results").style.display = "block";
      document.getElementById("normalizedAddress").textContent = feature.properties.label;
      
      const coords = feature.geometry.coordinates; 
      document.getElementById("gpsCoords").textContent = coords[1] + ", " + coords[0];

      renderResults();
    }

    // 5. Render Kaarten
    function renderResults() {
      const container = document.getElementById("techCards");
      const internet = providersData && providersData.internet ? providersData.internet : {};
      
      const listLinks = (arr) => {
        if(!arr) return "";
        return arr.map(p => `<a href="${p.url}" target="_blank">${p.name}</a>`).join("<br>");
      };

      container.innerHTML = `
        <div class="tech-card">
          <span class="pill">Fibre</span>
          <h3>Glasvezel</h3>
          <p>Check beschikbaarheid bij:</p>
          <div class="links-list">${listLinks(internet.fibre)}</div>
        </div>
        <div class="tech-card">
          <span class="pill">4G/5G</span>
          <h3>4G/5G Box</h3>
          <p>Check dekking bij:</p>
          <div class="links-list">${listLinks(internet["4g5g"])}</div>
        </div>
        <div class="tech-card">
          <span class="pill">Starlink</span>
          <h3>Satelliet (LEO)</h3>
          <div class="links-list">${listLinks(internet.leo)}</div>
        </div>
      `;

      const tvList = document.getElementById("tvList");
      const vpnList = document.getElementById("vpnList");
      
      if(providersData && providersData.tv) {
         let tvHtml = "";
         providersData.tv.nl.forEach(t => tvHtml += `<li>${t.name} (<a href="${t.url}" target="_blank">link</a>)</li>`);
         tvList.innerHTML = tvHtml;
      }
      
      if(providersData && providersData.vpn) {
         let vpnHtml = "";
         providersData.vpn.forEach(v => vpnHtml += `<li>${v.name} - ${v.type} (<a href="${v.url}" target="_blank">site</a>)</li>`);
         vpnList.innerHTML = vpnHtml;
      }
    }

    document.addEventListener("DOMContentLoaded", loadProviders);
    
    document.addEventListener('click', function(e) {
      const container = document.querySelector('.search-container');
      if (!container.contains(e.target)) {
        document.getElementById("addressSuggestions").style.display = 'none';
      }
    });
  </script>
</body>
</html>
