<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Internetverbinding ‚Äì Dataverbinding Frankrijk</title>
<style>
    body { font-family: sans-serif; margin: 0; padding: 20px; padding-bottom: 100px; max-width: 800px; margin: 0 auto; }
    h1 { color: #800000; margin-bottom: 5px; }
    h3 { color: #666; margin-top: 0; font-weight: normal; }
    
    /* Zoekbalk */
    input { width: 100%; padding: 12px; font-size: 16px; border: 2px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    
    /* Suggesties */
    #addressSuggestions { display: none; border: 1px solid #ccc; border-top: none; }
    .suggestion { padding: 10px; cursor: pointer; border-bottom: 1px solid #eee; }
    .suggestion:hover { background: #f0f0f0; }

    /* Resultatenblokken */
    #results { display: none; margin-top: 20px; }
    .box { border: 1px solid #ddd; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
    .blue-box { background: #f0f7ff; border-color: #cce5ff; text-align: center; }
    
    /* De Vaste Balk (Staat hard in HTML, standaard verborgen) */
    #stickyBar { 
        display: none; /* Hierdoor zie je hem eerst niet */
        position: fixed; bottom: 0; left: 0; width: 100%; 
        background: white; border-top: 4px solid #800000; 
        padding: 15px; text-align: center; box-shadow: 0 -5px 20px rgba(0,0,0,0.2); 
        z-index: 1000; 
    }
    .btn-group { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
    .btn { padding: 10px 20px; border: 2px solid; border-radius: 5px; cursor: pointer; font-weight: bold; background: white; }
    
    /* Kleuren */
    .btn-green { color: #28a745; border-color: #28a745; }
    .btn-yellow { color: #d39e00; border-color: #d39e00; }
    .btn-gray { color: #6c757d; border-color: #6c757d; }
    .btn:hover { background-color: #f9f9f9; }

    /* Links */
    a { color: #0056b3; text-decoration: none; }
    a:hover { text-decoration: underline; }
    
    .tech-card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
    .pill { background: #800000; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px; }
</style>
</head>
<body>

<h1>Internetverbinding</h1>
<h3>Dataverbinding Frankrijk</h3>
<p>Vul uw adres in. Wij openen de offici√´le kaart.</p>

<input id="addr" type="text" placeholder="Bijv. 22 Rue de Sehen" autocomplete="off">
<div id="addressSuggestions"></div>

<div id="results">
    <div id="step1" class="box blue-box">
        <h3 style="color:#004085; margin-top:0;">Stap 1: Check de kaart</h3>
        <p>Klik op de knop. Er opent een nieuw venster.<br>Kijk welk bolletje er op uw huis staat.</p>
        <a id="mapLink" href="#" target="_blank" style="display:inline-block; background:#800000; color:white; padding:12px 20px; border-radius:4px; font-weight:bold; text-decoration:none;">üìç Open Kaart</a>
    </div>

    <div id="advice" style="display:none;"></div>
</div>

<div id="stickyBar">
    <div style="margin-bottom:5px; font-weight:bold; color:#555;">Stap 2: Wat zag u op de kaart?</div>
    <div class="btn-group">
        <button class="btn btn-green" onclick="showAdvice('fibre')">üü¢ Groen (Glasvezel)</button>
        <button class="btn btn-yellow" onclick="showAdvice('dsl')">üü° Geel (Koper)</button>
        <button class="btn btn-gray" onclick="showAdvice('none')">‚ö™ Grijs / Niets</button>
    </div>
</div>

<script>
// DATA
const links = {
    fibre: [
        {n: "Orange", u: "https://boutique.orange.fr/internet/offres-fibre"},
        {n: "SFR", u: "https://www.sfr.fr/offre-internet.html"},
        {n: "Bouygues", u: "https://www.bouyguestelecom.fr/offres-internet/fibre"},
        {n: "Free", u: "https://www.free.fr/freebox/"}
    ],
    starlink: {n: "Starlink", u: "https://www.starlink.com/"},
    box4g: {n: "4G Box (Orange)", u: "https://boutique.orange.fr/internet/offres-4g-home"}
};

// ZOEKEN
let debounce;
const inp = document.getElementById('addr');
const sugg = document.getElementById('addressSuggestions');

inp.addEventListener('input', () => {
    clearTimeout(debounce);
    if(inp.value.length < 3) { sugg.style.display='none'; return; }
    
    debounce = setTimeout(() => {
        fetch(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(inp.value)}&limit=5`)
        .then(r=>r.json())
        .then(d => {
            sugg.innerHTML = '';
            if(d.features && d.features.length) {
                sugg.style.display = 'block';
                d.features.forEach(f => {
                    const div = document.createElement('div');
                    div.className = 'suggestion';
                    div.innerHTML = `<strong>${f.properties.label}</strong>`;
                    div.onclick = () => select(f);
                    sugg.appendChild(div);
                });
            }
        });
    }, 300);
});

function select(f) {
    sugg.style.display = 'none';
    inp.value = f.properties.label;
    
    // Zet UI klaar
    document.getElementById('results').style.display = 'block';
    document.getElementById('advice').style.display = 'none';
    
    // Zet link goed
    const [lon, lat] = f.geometry.coordinates;
    document.getElementById('mapLink').href = `https://maconnexioninternet.arcep.fr/?lat=${lat}&lng=${lon}&zoom=20&mode=debit&techno=filaire`;
    
    // TOON BALK (Simpelweg display block zetten)
    document.getElementById('stickyBar').style.display = 'block';
}

function showAdvice(type) {
    // VERBERG BALK
    document.getElementById('stickyBar').style.display = 'none';
    
    const div = document.getElementById('advice');
    div.style.display = 'block';
    
    const mkLink = (l) => `<a href="${l.u}" target="_blank" style="display:block; margin-bottom:5px;">${l.n} &rarr;</a>`;
    const mkList = (arr) => arr.map(mkLink).join('');

    let html = '';
    
    if(type === 'fibre') {
        html = `
            <div style="background:#d4edda; color:#155724; padding:15px; border-radius:8px; margin-bottom:20px;">
                <strong>‚úÖ U heeft Glasvezel!</strong>
            </div>
            <div class="tech-card">
                <span class="pill">Aanbevolen</span>
                <h3>Glasvezel Providers</h3>
                ${mkList(links.fibre)}
            </div>`;
    } else if(type === 'dsl') {
        html = `
            <div style="background:#fff3cd; color:#856404; padding:15px; border-radius:8px; margin-bottom:20px;">
                <strong>‚ö†Ô∏è U heeft waarschijnlijk ADSL (koper).</strong> Snelheid is beperkt.
            </div>
            <div class="tech-card">
                <span class="pill">Alternatief</span>
                <h3>Starlink</h3>
                <p>Sneller dan ADSL.</p>
                ${mkLink(links.starlink)}
            </div>
            <div class="tech-card">
                <h3>Vaste Lijn (ADSL)</h3>
                ${mkList(links.fibre)}
            </div>`;
    } else {
        html = `
            <div style="background:#f8d7da; color:#721c24; padding:15px; border-radius:8px; margin-bottom:20px;">
                <strong>‚ùå Geen vaste lijn gevonden.</strong>
            </div>
            <div class="tech-card">
                <span class="pill">Beste Keuze</span>
                <h3>Starlink</h3>
                <p>Werkt overal, hoge snelheid.</p>
                ${mkLink(links.starlink)}
            </div>
            <div class="tech-card">
                <h3>4G Box</h3>
                ${mkLink(links.box4g)}
            </div>`;
    }
    
    div.innerHTML = html;
    div.scrollIntoView({behavior:'smooth'});
}
</script>

</body>
</html>
